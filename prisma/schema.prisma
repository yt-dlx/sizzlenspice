// prisma/schema.prisma
datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["prismaSchemaFolder"]
}

model User {
  id            String        @id @default(auto()) @map("_id") @db.ObjectId
  email         String        @unique
  phoneNumber   String?
  customerEmail String?
  locationData  LocationData?
}

model LocationData {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  latitude  String
  longitude String
  address   String
  pincode   String
  user      User   @relation(fields: [userId], references: [id])
  userId    String @unique @db.ObjectId
}

model Order {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  userId        String
  items         Json
  phoneNumber   String
  locationData  Json
  customerEmail String
  status        String
  createdAt     DateTime @default(now())
  total         Float
}

model Restaurant {
  id                  String     @id @default(auto()) @map("_id") @db.ObjectId
  email               String     @unique
  phoneNumber         String     @unique
  address             String     @unique
  pincode             String     @unique
  ownerName           String
  OperatingHoursStart String
  OperatingHoursEnd   String
  createdAt           DateTime   @default(now())
  verified            Boolean    @default(false)
  menuItems           MenuItem[]
}

model MenuItem {
  id           String     @id @default(auto()) @map("_id") @db.ObjectId
  title        String
  image        String
  category     String
  description  String
  genre        String
  price        Price      @relation(fields: [priceId], references: [id])
  restaurant   Restaurant @relation(fields: [restaurantId], references: [id])
  restaurantId String     @db.ObjectId
  priceId      String     @db.ObjectId
}

model Price {
  id       String     @id @default(auto()) @map("_id") @db.ObjectId
  small    String
  medium   String
  full     String
  MenuItem MenuItem[]
}
